<!DOCTYPE html>
<html>
	<link rel="stylesheet" type="text/css" href="../css/page.css" />
	<link rel="stylesheet" type="text/css" href="../css/dark.css"/>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title></title>
	</head>
	<body class="clearfix">
		<div class="left">
			<div class="panel">
			    <div class="panel_title">算法介绍</div>
			    <div class="line left-line"></div>
			    <div class="line right-line"></div>
				<p id="sortInfo"></p>
			</div>
			<div class="panel"">
			    <div class="panel_title" >排序分析</div>
			    <div class="line left-line"></div>
			    <div class="line right-line"></div>
				<div class="analyse_container_left"></div>
				<div class="analyse_container_right">
					<p></p><p></p><p></p><p></p>
				</div>
			</div>
		</div>
		
		<div class="right">
			<div class="panel panel_code">
			    <div class="panel_title">算法实现</div>
			    <div class="line left-line"></div>
			    <div class="line right-line"></div>
				<pre class="hljs"><code class="javascript"></code></pre>
			</div>
			
		</div>
		<div class="btn btn_start_restart">
			<div class="num">数据个数：<input id="inputNum" type="number" value=10></input><input type="range" value=10 id="inputRange" max=15 min=2></div>
			<button id="input">输入数据</button><span>或</span><button id="random">随机数据</button>
			<div class="speed">排序速度：<input id="sortSpeed" type="number" value=3></input><input type="range" value=3 id="speedRange" max=6 min=1></div>
		</div>
		
		<div class="bottom">
			<div class="panel panel_sort">
				<div class="panel_title">排序过程</div>
				<div class="line left-line"></div>
				<div class="line right-line"></div>
				<div id="progressContainer"></div>
				<div id="progressControl" class="btn">
					 <button id="start" >开始</button>
					 <button id="restart">重开</button>
				</div>
			</div>
		</div>
		
	</body>
</html>
<script src="../js/jquery-3.2.1.min.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/jquery.cookie.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/highlight.pack.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/bubbleSort.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/data.js" type="text/javascript" charset="utf-8"></script> 
<script type="text/javascript">
	////////////////////////////////////////////////////////////页面加载
	$(document).ready(function() {
		 //隐藏排序过程和排序分析
		 $(".bottom").hide();
		 $(".panel").eq(1).hide();
		 $(".inputBox").hide();
		 //显示算法介绍和实现
		 $("#sortInfo").text(Info.bubbleInfo);
		 $("code").html(Code.bubbleCode);
		 //框架高度自适应
		 window.localStorage.setItem("iframeHeight",$("body").height()+40);
		 
		 //代码高亮
		 hljs.initHighlightingOnLoad();
		 $(document).ready(function() {
		   $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
		 });
		 
		 //新建对象
	     bSort=new bubble();
	});
	////////////////////////////////////////////////////////////输入数据
	$('#input').click(function(){
		 //显示排序和分析模块
		 $(".bottom").show();
		 $(".panel").eq(1).show();
		 
		 //修改btn组位置
		 $(".btn_start_restart").width(60+"%");
		 
		 //框架高度自适应
		 window.localStorage.setItem("iframeHeight",$("body").height()+40);
		 
		 //如果已经进行排序，点击按钮则销毁上次排序
		 if(!($(".bottom").is(":hidden"))) bSort.destroySort();
		 
		 //显示输入数据
		 bSort.initInputSort($("#inputNum").val());
		
		 //输入完成
		//显示排序分析
		 $(".analyse_container_right p").eq(0).text(time.bubbleTime);
		 $(".analyse_container_right p").eq(1).text(space.bubbleTime);
		 
		 //启用禁用开始按钮
		  $("#start").hide();
		  $("#restart").hide();
	});
	//////输入完成
	$("#progressContainer").on('click','#btn_inputComplete',function(){
	    bSort.clearTimeOut();
	     var input=[];
	     for(var i=0;i<$("#progressContainer input").length;i++){
	     	input.push(Number($("#progressContainer input").eq(i).val()));
	     }
	     bSort.inputValue(input);
	     $('#progressContainer div').remove();
	     $(".analyse_container_left").empty();
	     bSort.displayBlock(input);
	     $("#start").show();
	     $("#restart").show();
	     $("#start").removeAttr('disabled');
	     $("#restart").attr('disabled',true);
		 $("#start").removeClass('btn_hover');
		 $("#restart").addClass('btn_hover');
	});
	////////////////////////////////////////////////////////////生成随机数据
	$('#random').click(function(){
		//显示排序和分析模块
		$(".bottom").show();
		$(".panel").eq(1).show();
		
		//修改btn组位置
		$(".btn_start_restart").width(60+"%");
		
		//框架高度自适应
		if(window.Storage && window.localStorage && window.localStorage instanceof Storage){
			window.localStorage.setItem("iframeHeight",$("body").height()+40);
		}
		//如果已经进行排序，点击按钮则销毁上次排序
		if(!($(".bottom").is(":hidden"))) bSort.destroySort();
		
		//随机生成数据，显示，排序
		bSort.randomValue();
		bSort.initRandomSort(bSort.sortVal);
		//显示排序分析
		$(".analyse_container_right p").eq(0).text(time.bubbleTime);
		$(".analyse_container_right p").eq(1).text(space.bubbleTime);
		
		//启用禁用开始按钮
		$("#start").show();
		$("#restart").show();
		$("#start").removeAttr('disabled');
		$("#restart").attr('disabled',true);
		$("#start").removeClass('btn_hover');
		$("#restart").addClass('btn_hover');
		
	});
	////////////////////////////////////////////////////////////排序数据个数控制
	$("#inputRange").on("change",function(){
		$("#inputRange").css("backgroundSize",(100/15)*$("#inputRange").val());
	  $("#inputNum").val($("#inputRange").val());
	  bSort.sortNum=$("#inputRange").val();
	})
	$("#inputNum").on("change",function(){
		$("#inputRange").css("backgroundSize",(100/15)*$("#inputNum").val());
	  $("#inputRange").val($("#inputNum").val());
	  if($("#inputNum").val()>15) $("#inputNum").val(15);
	  if($("#inputNum").val()<2) $("#inputNum").val(2);
	  bSort.sortSpeed=$("#inputNum").val();
	})
	////////////////////////////////////////////////////////////排序速度控制
	$("#speedRange").on("change",function(){
		$("#speedRange").css("backgroundSize",(100/6)*$("#speedRange").val());
	  $("#sortSpeed").val($("#speedRange").val());
	  bSort.sortSpeed=$("#speedRange").val();
	})
	$("#sortSpeed").on("change",function(){
	  $("#speedRange").css("backgroundSize",(100/6)*$("#sortSpeed").val());
	  $("#speedRange").val($("#sortSpeed").val());
	  if($("#sortSpeed").val()>6) $("#sortSpeed").val(6);
	  if($("#sortSpeed").val()<1) $("#sortSpeed").val(1);
	  bSort.sortSpeed=$("#sortSpeed").val();
	})
	////////////////////////////////////////////////////////////开始、重开控制按钮
	$("#start").click(function(){
		var sortValue=new Array();
		for(var i=0;i<bSort.sortVal.length;i++ ){
			sortValue.push(bSort.sortVal[i]);
		}
		bSort.bubbleSort(sortValue);
		bSort.startSort();
		////启用禁用开始按钮
		$(this).attr('disabled',true);
		$("#restart").removeAttr('disabled');
		$(this).addClass("btn_hover");
		$("#restart").removeClass('btn_hover');
		//显示排序分析
		$(".analyse_container_right p").eq(2).text("比较次数为"+bSort.compareTime);
		$(".analyse_container_right p").eq(3).text("交换次数为"+bSort.changeTime);
		
	})
	
	$("#restart").click(function(){
		if(bSort.valueType=="random"){
			bSort.restart();
			bSort.initRandomSort(bSort.sortVal)
			bSort.startSort();
		}else{
			 
			bSort.restart();
			 bSort.initInputSort($("#inputNum").val());
			 for(var i=0;i<$("#inputNum").val();i++){
				 $("#inputVal input").eq(i).val(bSort.sortVal[i]);
			 }
			 console.log(bSort.sortQueen)
			 bSort.displayBlock(bSort.sortVal);
			 bSort.startSort();
		}
		
	})
	 
</script>
 
